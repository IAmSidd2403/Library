<%- include('partials/header.ejs') %>

<div class="container mx-auto p-5 bg-white rounded-lg shadow-lg max-w-4xl mt-10">
    <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
        <div class="w-full md:w-1/3 text-center">
            <% if (book.cover_id) { %>
                <img src="https://covers.openlibrary.org/b/id/<%= book.cover_id %>-L.jpg" alt="Book cover" class="max-w-full h-auto rounded-md shadow-lg mx-auto">
            <% } else if (book.isbn) { %>
                <img src="https://covers.openlibrary.org/b/isbn/<%= book.isbn %>-L.jpg" alt="Book cover" class="max-w-full h-auto rounded-md shadow-lg mx-auto">
            <% } else { %>
                <div class="w-full h-96 bg-gray-200 flex items-center justify-center rounded-md text-gray-500">No Cover Available</div>
            <% } %>
        </div>
        <div class="w-full md:w-2/3">
            <h1 class="text-4xl font-bold text-gray-800 mb-2"><%= book.title %></h1>
            <h2 class="text-xl font-semibold text-gray-600 mb-4">by <%= book.authors %></h2>

            <p class="text-gray-700 mb-2"><strong>Rating:</strong> <%= book.rating %>/5</p>
            <p class="text-gray-700 mb-2"><strong>Read on:</strong> <%= new Date(book.read_date).toLocaleDateString() %></p>
            <p class="text-gray-700 mb-4"><strong>ISBN:</strong> <%= book.isbn %></p>

            <% if (book.review) { %>
                <div class="mt-4 p-4 bg-gray-100 rounded-lg">
                    <h3 class="text-lg font-bold text-gray-700 mb-2">My Review</h3>
                    <p class="text-gray-600"><%= book.review %></p>
                </div>
            <% } %>

            <% if (book.notes) { %>
                <div class="mt-4 p-4 bg-gray-100 rounded-lg">
                    <h3 class="text-lg font-bold text-gray-700 mb-2">Notes & Summary</h3>
                    <p class="text-gray-600"><%= book.notes %></p>
                </div>
            <% } %>

            <div class="mt-6 flex gap-4">
                <form action="/edit/<%= book.id %>" method="GET">
                    <button type="submit" class="bg-yellow-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-600 transition-colors">Edit Details</button>
                </form>
                <form action="/delete/<%= book.id %>" method="POST">
                    <button type="submit" class="bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 transition-colors">Delete Book</button>
                </form>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer.ejs') %>